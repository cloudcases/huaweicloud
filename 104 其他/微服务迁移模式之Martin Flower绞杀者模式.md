# 微服务迁移模式之Martin Flower绞杀者模式

2021-08-30 368

**简介：** 绞杀者模式（Strangler Pattern）是一种非常流行的从单体系统向微服务迁移的策略，其主张通过用新服务替换特定功能来将单体系统逐步转换为微服务，一旦新服务已经能够代替原有旧有功能，就将原有功能组件绞杀（即彻底停用）。

绞杀者模式（Strangler Pattern）是**一种非常流行的从单体系统向微服务迁移的策略**，其主张通过**用新服务替换特定功能来将单体系统逐步转换为微服务，一旦新服务已经能够代替原有旧有功能，就将原有功能组件绞杀（即彻底停用）**。

基于绞杀者模式将单体系统拆分为微服务的时候，任何新的开发都应该作为新服务的一部分，而不是单体系统，这保证了新的开发领域的代码具有较高的质量。建议在编写业务逻辑时遵循测试驱动开发（Test-Driven Development, TDD），并将SonarQube与部署管道集成，以避免产生任何技术债务。

借助绞杀者模式从单体系统向微服务系统迁移可以大致简化为三个步骤，即转化、共存和消亡。
![图片 1.png](https://ucc.alicdn.com/pic/developer-ecology/ca06a4b9f9da4a989301e33d9aa553d8.png)

简而言之，就是**开发一个新组件（即微服务），让新组建和旧组件共存一段时间，最终消除旧组件**。大致步骤如下：

- 最初，所有访问应用的流量都路由到旧版系统。
- 构建新组件后，可以对单体系统代码与新功能一起进行测试。
- 单体系统和新组件需要共同运行一段时间，这段过渡时间可能会较长。
- 对新组件进行增量开发和测试后，可以完全停用旧的单体系统。

![2.png](https://ucc.alicdn.com/pic/developer-ecology/2d6ec1cd8d0a433aad0c3269cbdfe61a.png)

如何选择首先要绞杀/重构的组件？

- 如果您是首次使用绞杀者模式，并且之前对这种模式并不是非常熟悉，此时建议从绞杀简单的组件开始尝试，这样一来也为绞杀复杂组件提供了知识储备和最佳实践。
- 如果某个组件的测试覆盖率较高，并且相关的技术债务较少，那么可以考虑从该组件开始较少，这样易于帮助团队建立信心。
- 如果某些组件对于可伸缩性具有较高的要求，可以从这些组件之一开始。
- 如果某个组件的业务需求比较频繁而需要定期部署，则可以从该组件开始。这将降低单体系统重新部署的频率，并且便于对于需求变更较为频繁的组件进行独立扩展和部署。

**版权声明：**本文内容由阿里云实名注册用户自发贡献，版权归原作者所有，阿里云开发者社区不拥有其著作权，亦不承担相应法律责任。具体规则请查看《[阿里云开发者社区用户服务协议](https://developer.aliyun.com/article/768092)》和《[阿里云开发者社区知识产权保护指引](https://developer.aliyun.com/article/768093)》。如果您发现本社区中有涉嫌抄袭的内容，填写[侵权投诉表单](https://yida.alibaba-inc.com/o/right)进行举报，一经查实，本社区将立刻删除涉嫌侵权内容。

[微服务](https://developer.aliyun.com/label/sc/article_de-3-100019)

[微服务](https://www.aliyun.com/sswc/404243.html) [分钟微服务](https://www.aliyun.com/sswc/42664.html) [微服务调用](https://www.aliyun.com/sswc/44833.html) [微服务事务](https://www.aliyun.com/sswc/132525.html) [微服务问题](https://www.aliyun.com/sswc/28475.html)