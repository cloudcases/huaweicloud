## docker学习笔记5：利用commit命令创建镜像 和 删除本地镜像

### 一、概述

创建镜像有两种方法，一是用commit命令，二是用dockerfile方法（这个更常用，在下面文章介绍）。本章介绍commit方法。

在介绍commit命令前，我们先回顾下对代码的版本控制，当修改代码后，我们会commit变更到版本服务器上。

对于容器类似的概念，当创建容器后，如果后面对容器做了修改，就可以利用commit命令将修改提交为一个新的镜像。

### 二、例子说明

下面我们通过具体的例子来说明：

#### 1、创建新容器

```
docker run --name newcontent -i -t ubuntu /bin/bash
```

#### 2、进行操作，修改容器内容

```
echo hello world >>test.txt   //通过重定向功能创建一个文件
```

#### 3、退出shell，容器关闭

#### 4、用diff命令查看容器的变化信息

```
xxx@ubuntu:~$ docker diff newcontent
```

```
C /root
A /root/.bash_history
A /test.txt
```

#### 5、创建新镜像

```
docker commit newcontent  newnewcontent2
```

这时就在本地创建了一个仓库名为newnewcontent2，tag值为默认为latest的镜像。

规范的镜像名应该为：

```
[username/]repositoryName[:tagName]
```

如：docker commit newcontent  jeme/myubuntu:1.0  如果没有tagName，则默认为latest。

注意：如果需要把该镜像提交到dokcer hub中心，则必须规范命名（必须是  用户名/仓库名，tag可以缺省），前面的用户名是在dokcer hub上注册的用户名。

### 三、删除本地镜像   

```
docker rmi  镜像名/ID
```

