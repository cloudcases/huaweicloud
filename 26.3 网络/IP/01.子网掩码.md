# 子网掩码

本词条由[“科普中国”科学百科词条编写与应用工作项目](https://baike.baidu.com/science) 审核 。

**子网掩码**(subnet mask)又叫[网络掩码](https://baike.baidu.com/item/网络掩码/7862514)、[地址掩码](https://baike.baidu.com/item/地址掩码/8623995)、子网络遮罩，它用来指明一个[IP地址](https://baike.baidu.com/item/IP地址)的哪些位标识的是[主机](https://baike.baidu.com/item/主机/455151)所在的子网，以及哪些位标识的是主机的位掩码。子网掩码不能单独存在，它必须结合IP地址一起使用。子网掩码只有一个作用，就是将某个IP地址划分成[网络地址](https://baike.baidu.com/item/网络地址/9765459)和[主机地址](https://baike.baidu.com/item/主机地址/9765500)两部分。 [1] 

子网掩码是一个32位地址，用于屏蔽IP地址的一部分以区别网络标识和主机标识，并说明该IP地址是在[局域网](https://baike.baidu.com/item/局域网/98626)上，还是在[广域网](https://baike.baidu.com/item/广域网/422004)上。

- 中文名        子网掩码
- 外文名        Subnet Mask

- 别  名          网络掩码、地址掩码
- 所属行业    计算机网络
- 作  用          IP划分成网络地址和主机地址



## 目录

1. 1 [简介](https://baike.baidu.com/item/子网掩码/100207#1)
2. 2 [子网掩码的功能](https://baike.baidu.com/item/子网掩码/100207#2)
3. ▪ [声明网络地址与主机地址](https://baike.baidu.com/item/子网掩码/100207#2_1)
4. ▪ [划分子网](https://baike.baidu.com/item/子网掩码/100207#2_2)
5. 3 [计算方式](https://baike.baidu.com/item/子网掩码/100207#3)

1. ▪ [根据子网数](https://baike.baidu.com/item/子网掩码/100207#3_1)
2. ▪ [根据主机数](https://baike.baidu.com/item/子网掩码/100207#3_2)
3. ▪ [增量计算法](https://baike.baidu.com/item/子网掩码/100207#3_3)
4. 4 [标注方法](https://baike.baidu.com/item/子网掩码/100207#4)
5. ▪ [无子网](https://baike.baidu.com/item/子网掩码/100207#4_1)
6. ▪ [有子网](https://baike.baidu.com/item/子网掩码/100207#4_2)
7. 5 [分类](https://baike.baidu.com/item/子网掩码/100207#5)

1. ▪ [缺省子网掩码](https://baike.baidu.com/item/子网掩码/100207#5_1)
2. ▪ [自定义子网掩码](https://baike.baidu.com/item/子网掩码/100207#5_2)
3. 6 [变长子网掩码](https://baike.baidu.com/item/子网掩码/100207#6)
4. 7 [IPV6与子网掩码](https://baike.baidu.com/item/子网掩码/100207#7)



## 简介

子网掩码是在[IPv4](https://baike.baidu.com/item/IPv4/422599)地址资源紧缺的背景下为了解决lP地址分配而产生的虚拟lP技术，通过子网掩码将A、B、C三类地址划分为若干子网，从而显著提高了IP地址的分配效率，有效解决了IP地址资源紧张的局面。另一方面，在企业内网中为了更好地管理网络，网管人员也利用子网掩码的作用，人为地将一个较大的企业内部网络划分为更多个小规模的子网，再利用[三层交换机](https://baike.baidu.com/item/三层交换机/816331)的路由功能实现子网互联，从而有效解决了网络广播风暴和网络病毒等诸多网络管理方面的问题。 [2] 

在大多数的网络教科书中，一般都将子网掩码的作用描述为通过[逻辑运算](https://baike.baidu.com/item/逻辑运算/7224729)，**将IP地址划分为网络标识(Net.ID)和主机标识(Host.ID)**，**只有网络标识相同的两台主机在无路由的情况下才能相互通信**。 [2] 

根据RFC950定义，**子网掩码是一个32位的2进制数， 其对应网络地址的所有位都置为1，对应于主机地址的所有位置都为0**。**子网掩码告知[路由器](https://baike.baidu.com/item/路由器/108294)，地址的哪一部分是网络地址，哪一部分是主机地址，使路由器正确判断任意IP地址是否是本[网段](https://baike.baidu.com/item/网段/11026985)的，从而正确地进行路由**。网络上，数据从一个地方传到另外一个地方，是依靠IP寻址。从逻辑上来讲，是两步的。**第一步，从IP中找到所属的网络**，好比是去找这个人是哪个小区的；**第二步，再从IP 中找到主机在这个网络中的位置**，好比是在小区里面找到这个人。 [3] 

子网掩码的设定必须遵循一定的规则。与[二进制](https://baike.baidu.com/item/二进制)IP地址相同，子网掩码由1和0组成，且1和0分别连续。子网掩码的长度也是32位，左边是网络位，用[二进制](https://baike.baidu.com/item/二进制)数字“1”表示，1的数目等于网络位的长度；右边是主机位，用[二进制数字](https://baike.baidu.com/item/二进制数字/5920908)“0”表示，0的数目等于主机位的长度。这样做的目的是为了让掩码与IP地址做按位与运算时用0遮住原主机数，而不改变原网络段数字，而且很容易通过0的位数确定子网的主机数（2的主机位数次方-2，因为主机号全为1时表示该网络[广播地址](https://baike.baidu.com/item/广播地址)，全为0时表示该网络的[网络号](https://baike.baidu.com/item/网络号)，这是两个特殊地址）。通过子网掩码，才能表明一台主机所在的子网与其他子网的关系，使网络正常工作。



## 子网掩码的功能

子网掩码是一个32位地址，是与IP地址结合使用的一种技术。它的主要作用有两个，**一是用于屏蔽IP地址的一部分以区别网络标识和[主机](https://baike.baidu.com/item/主机)标识，并说明该IP地址是在[局域网](https://baike.baidu.com/item/局域网)上，还是在远程网上。二是用于将一个大的IP网络划分为若干小的子网络。**

使用子网是为了减少IP的浪费。因为随着[互联网](https://baike.baidu.com/item/互联网)的发展，越来越多的网络产生，有的网络多则几百台，有的只有区区几台，这样就浪费了很多IP地址，所以要划分子网。使用子网可以提高网络应用的效率。

通过计算机的子网掩码判断两台计算机是否属于同一网段的方法是，**将计算机十进制的IP地址和子网掩码转换为二进制的形式，然后进行二进制“与”(AND)计算（全1则得1，不全1则得0），如果得出的结果是相同的，那么这两台计算机就属于同一网段**。 [4] 

### 声明网络地址与主机地址

表 1　默认子网掩码 [3] 

| 类别 | 子网掩码的二进制数值                | 子网掩码的十进制数值 |
| ---- | ----------------------------------- | -------------------- |
| A    | 11111111 00000000 00000000 00000000 | 255.0.0.0            |
| B    | 11111111 11111111 00000000 00000000 | 255.255.0.0          |
| C    | 11111111 11111111 11111111 00000000 | 255.255.255.0        |

子网掩码一定是配合IP地址来使用的。对于常用网络A、 B、C 类IP地址其默认子网掩码的二进制与十进制对应关系如表1所示。

子网掩码工作过程是：将32位的子网掩码与IP地址进行[二进制](https://baike.baidu.com/item/二进制/361457)形式的按位逻辑“[与](https://baike.baidu.com/item/与/13025631)”运算得到的便是网络地址，将子网掩码二进制和IP地址二进制进行逻辑“与”（AND）运算，得到的就是主机地址。如：192.168.10.11 AND 255.255.255.0，结果为192.168.10.0，其表达的含义为：该IP地址属于 192.168.10.0这个网络，其主机号为11，即这个网络中编号为11的主机。 [3] 

### 划分子网

子网掩码机制提供了子网划分的方法。其作用是：**减少网络上的通信量；节省IP地址；便于管理；解决[物理网络](https://baike.baidu.com/item/物理网络/6639862)本身的某些问题**。

**使用子网掩码划分子网后，[子网](https://baike.baidu.com/item/子网/1186929)内可以通信，跨子网不能通信，子网间通信应该使用路由器，并正确配置[静态路由](https://baike.baidu.com/item/静态路由/100778)信息**。划分子网，就应遵循子网划分结构的规则。就是用连续的1在IP地址中增加表示网络地址，同时减少表示主机地址的位数。

例如，IP地址为130.39.37.100，网络地址为130.39.37.0、子网地址为130.39.37.0、子网掩码为255.255.255.0，网络地址部分和子网标识部分为“1”所对应，主机标识部分为“0”所对应。 

使用[CIDR](https://baike.baidu.com/item/CIDR/3695195)表示为：130.39.37.100/24即IP地址/ 掩码长度。其中第三个字节上的255 所对应的8位二进制数值就是将主机地址位数借给了网络地址部分，充当了划分子网的位数。 [3] 



## 计算方式

由于子网掩码的位数决定于可能的子网数目和每个子网的[主机](https://baike.baidu.com/item/主机)数目。在定义子网掩码前，必须弄清楚本来使用的[子网](https://baike.baidu.com/item/子网)数和[主机](https://baike.baidu.com/item/主机)数目。

### 根据子网数

利用子网数来计算

在求子网掩码之前必须先搞清楚要划分的子网数目，以及每个子网内的所需主机数目。

1)将子网数目转化为二进制来表示

2)取得该[二进制](https://baike.baidu.com/item/二进制)的位数，为 N

3)取得该IP地址的类子网掩码，将其[主机地址](https://baike.baidu.com/item/主机地址)部分的前N位置1 即得出该IP地址划分子网的子网掩码。

如欲将B类IP地址168.195.0.0划分成27个子网：

1)27=11011

2)该[二进制](https://baike.baidu.com/item/二进制)为五位数，N = 5

3)将B类地址的子网掩码255.255.0.0的[主机地址](https://baike.baidu.com/item/主机地址)前5位置1（B类地址的主机位包括后两个字节，所以这里要把第三个字节的前5位置1），得到 255.255.248.0

即为划分成27个子网的B类IP地址 168.195.0.0的子网掩码（实际上是划成了32个子网）。 [5] 

### 根据主机数

利用主机数来计算

1)将主机数目转化为二进制来表示

2)如果主机数小于或等于254（注意去掉保留的两个IP地址），则取得该主机的[二进制](https://baike.baidu.com/item/二进制)位数，为 N，这里肯定N<8。如果大于254，则 N>8，这就是说[主机地址](https://baike.baidu.com/item/主机地址)将占据不止8位。

3)使用255.255.255.255来将该类IP地址的[主机地址](https://baike.baidu.com/item/主机地址)位数全部置1，然后从后向前的将N位全部置为 0，即为子网掩码值。

如欲将B类IP地址168.195.0.0划分成若干子网，每个子网内有[主机](https://baike.baidu.com/item/主机)700台：

\1) 700=1010111100

2)该[二进制](https://baike.baidu.com/item/二进制)为十位数，N = 10

3)将该B类地址的子网掩码255.255.0.0的[主机地址](https://baike.baidu.com/item/主机地址)全部置1，得到255.255.255.255

然后再从后向前将后10位置0，即为： 11111111.11111111.11111100.00000000

即255.255.252.0。这就是该域划分成[主机](https://baike.baidu.com/item/主机)为700台的B类IP地址168.195.0.0的子网掩码。 [5] 

### 增量计算法

子网ID[增量](https://baike.baidu.com/item/增量)计算法（即计算每个子网的IP范围）

其基本计算步骤如下：

第1步，将所需的子网数转换为二进制，如所需划分的子网数为“4”，则转换成成二进制为00000100；

第2步，取子网数的二进制中有效位数，即为向缺省子网掩码中加入的位数（既向主机ID中借用的位数）。如前面的00000100，有效位为“100”，为3位（在新标准中只需要2位就可以了）；

第3步，决定子网掩码。如IP地址为B类129.20.0.0网络，则缺省子网掩码为：255.255.0.0，借用主机ID的3位以后变为：255.255.224（11100000）.0，即将所借的位全表示为1，用作子网掩码。

第4步，将所借位的主机ID的起始位段最右边的“1”转换为十进制，即为每个子网ID之间的增量，如前面的借位的主机ID起始位段为“11100000”，最右边的“1”，转换成十进制后为2^5=32（此为子网ID增量）。

第5步，产生的子网ID数为：2^m-2 （m为向缺省子网掩码中加入的位数），如本例向子网掩码中添加的位数为3，则可用子网ID数为：2^3-2=6个；

第6步，将上面产生的子网ID增量附在原网络ID之后的第一个位段，便形成第一个子网网络ID 129.20.32.0（即第一个子网的起始IP段）；

第7步，重复上步操作，在原子网ID基础上加上一个子网ID增量，依次类推，直到子网ID中的最后位段为缺省子网掩码位用主机ID位之后的最后一个位段值，这样就可得到所有的子网网络ID。如缺省子网掩码位用主机ID位之后的子网ID为255.255.224.0，其中的“224”为借用主机ID后子网ID的最后一位段值，所以当子网ID通过以上增加增量的方法得到129.20.224.0时便终止，不要再添加了（只能用到129.20.192.0）。

我们知道当主机ID为全0时表示网络ID，全1时表示广播地址。在RFC950标准中，不建议使用全0和全1的子网ID。

例如把最后一个字节的前3位借给网络ID，用后面的5位来表示主机ID，这样就会产生2^3=8个子网，子网ID就分别为000、001、010、011、100、101、110、111这样8个，在RFC950标准中只能使用中间的6个子网ID。

这么做的原因是：

设我们有一个网络：192.168.0.0/24（即子网掩码的前24位为1，255.255.255.0），我们需要两个子网，那么按照RFC950，应该使用/26而不是/25，得到两个可以使用的子网192.168.0.64和192.168.0.128

对于192.168.0.0/24，网络地址是192.168.0.0，广播地址是192.168.0.255

对于192.168.0.0/26，网络地址是192.168.0.0，广播地址是192.168.0.63

对于192.168.0.64/26，网络地址是192.168.0.64，广播地址是192.168.0.127

对于192.168.0.128/26，网络地址是192.168.0.128，广播地址是192.168.0.191

对于192.168.0.192/26，网络地址是192.168.0.192，广播地址是192.168.0.255

可以看出来，对于第一个子网，网络地址和主网络的网络地址是重叠的，对于最后一个子网，广播地址和主网络的广播地址也是重叠的。在CIDR流行以前，这样的重叠将导致极大的混乱。



## 标注方法

### 无子网

无子网的标注法

对无子网的IP地址，可写成[主机](https://baike.baidu.com/item/主机)号为0的掩码。如IP地址210.73.140.5，掩码为255.255.255.0，也可以缺省掩码，只写IP地址。

### 有子网

有子网的标注法

有子网时，一定要二者配对出现。以[C类地址](https://baike.baidu.com/item/C类地址)为例。

以下一段指定掩码为27位(1111 1111, 1111 1111, 1111 1111, **111**0 0000=>255.255.255.224

1．IP地址中的前3个字节表示网络号，后一个字节既表明子网号，又说明主机号，还说明两个IP地址是否属于同一个[网段](https://baike.baidu.com/item/网段/11026985)。如果属于同一网络区间，这两个地址间的信息交换就不通过路由器。如果不属同一网络区间，也就是子网号不同，两个地址的信息交换就要通过路由器进行。

例如：

对于IP地址为210.73.140.5的[主机](https://baike.baidu.com/item/主机)来说，其主机标识为5=>00000101，

对于IP地址为210.73.140.16的主机来说它的主机标识为16=>00010000，

以上两个主机标识的前面三位全是000，说明这两个IP地址在同一个网络区域中，这两台主机在交换信息时不需要通过[路由器](https://baike.baidu.com/item/路由器)进行。

210.73.60.1的[主机](https://baike.baidu.com/item/主机)标识为1=>00000001，

210.73.60.252的主机标识为252=>11111100，

这两个主机标识的前面三位000与111不同，说明二者在不同的网络区域，要交换信息需要通过路由器。其子网上[主机](https://baike.baidu.com/item/主机)号各为1和252。

2．掩码的功用是说明有子网和有几个子网，但子网数只能表示为一个范围，不能确切讲具体几个子网，掩码不说明具体子网号，有子网的掩码格式(对C类地址)。



## 分类

子网掩码一共分为两类。一类是缺省（自动生成）子网掩码，一类是自定义子网掩码。 [6] 

### 缺省子网掩码

缺省子网掩码即未划分子网，对应的[网络号](https://baike.baidu.com/item/网络号/2634355)的位都置1，主机号都置0。

A类网络缺省子网掩码：255.0.0.0

B类网络缺省子网掩码：255.255.0.0

C类网络缺省子网掩码：255.255.255.0 [6] 

在缺省掩码下的IP地址中，网络地址和广播地址的计算很简单，虽然按照计算方法需要进制转换和与运算，但是在实际使用当中，我们已经可以快速写出结果。

网络地址的计算就是子网掩码中0对应的地方变0， “255”对应的地方不变即可；而[广播地址](https://baike.baidu.com/item/广播地址/8614095)则是子网掩码中0对应 的地方变“255”，“255”对应的地方不变。 [6] 

### 自定义子网掩码

自定义子网掩码是将一个网络划分为几个子网，需要每一段使用不同的网络号或子网号，实际上我们可以认为是将主机号分为两个部分：子网号、子网主机号。形式如下：

未做子网划分的IP地址：网络号+主机号

做子网划分后的IP地址：网络号+子网号+子网主机号

也就是说IP地址在划分子网后，以前的主机号位置的一部分给了子网号，余下的是子网主机号。子网掩码是32位二进制数，它的子网主机标识用部分为全“0”。利用子网掩码可以判断两台主机是否在同一子网中。若两台主机的IP地址分别与它们的子网掩码相“与”后的结果相同，则说明这两台主机在同一子网中。 [6] 



## 变长子网掩码

[变长子网掩码](https://baike.baidu.com/item/变长子网掩码/5155734)VLSM就是每段IP地址使用不同长度的子网掩码，可以对子网进行层次化编址，以便最有效的利用现有的地址空间。变长子网掩码(Variable-Length Subnet Masks，VLSM)的出现是打破传统的以类(class)为标准的地址划分方法，是为了缓解IP地址紧缺而产生的。他的作用是节约IP地址空间；减少路由表大小。需要注意的是注意事项：使用VLSM时，所采用的路由协议必须能够支持它，这些路由协议包括[RIPv2](https://baike.baidu.com/item/RIPv2/930362)，[OSPF](https://baike.baidu.com/item/OSPF/1166620)，[EIGRP](https://baike.baidu.com/item/EIGRP/321594)和[BGP](https://baike.baidu.com/item/BGP/91408)。 [7] 

变长子网掩码是将一个网段拆成多个子网的应用，这种应用在教育网内特别普遍，教育网使用的是[电信运营商](https://baike.baidu.com/item/电信运营商/10694548)提供的互联网出口。电信运营商为教育网提供了数个c类的公网IP地址，但是教育网的网管又希望每个学校都处于各自不同的网段，全市（包括县区在内）有上百所学校，为了适应这个要求，就必须使用变长子网掩码来重新规划网络。 [8] 

变长子网掩码是网络规划中的一种常见应用，它的 目的是最大限度地节省IP地址。网管员根据自己单位实际的网络情况，为不同网段灵活的定义不同的子网掩码，但是很多用户由于不了解变长子网掩码的相关知识从而进行了错误的设置。 [8] 



## IPV6与子网掩码

如果是都是使用的[IPV6](https://baike.baidu.com/item/IPV6/172297)的话是没有子网掩码的概念。IPV6是端到端的连接通信，不需要[子网](https://baike.baidu.com/item/子网/1186929)了。但是，目前似乎更多都是在[IPV4](https://baike.baidu.com/item/IPV4/422599)上使用[隧道](https://baike.baidu.com/item/隧道/2167748)的方式使用IPV6。完全消灭IPV4还需要相当长的时间，子网掩码目前还是要的。

IPv6中没有子网掩码的概念，也没有网络号与主机号的概念。在IPV6中前缀长度就可以当作子网掩码来理解。接口ID可以当作主机号来理解。在[Windows XP](https://baike.baidu.com/item/Windows XP/191927)中，IPv6地址的前缀长度默认为64位。IPv6的地址空间过于广大，可能一个子网的子网都要比整个IPv4的世界要大很多，所以子网的概念在IPv6世界里已经淡化了。但是，同一站点的主机要想直接通信（不经过[路由器](https://baike.baidu.com/item/路由器/108294)），还是要求前缀相同才行的。

词条图册[更多图册](https://baike.baidu.com/pic/子网掩码/100207?fr=lemma)

[![概述图册](https://bkimg.cdn.bcebos.com/pic/cefc1e178a82b901fe67b81a728da9773812efd5?x-bce-process=image/resize,m_lfit,w_235,h_235,limit_1/format,f_auto)概述图册(1)](https://baike.baidu.com/pic/子网掩码/100207/1/cefc1e178a82b901fe67b81a728da9773812efd5?fr=lemma)



参考资料

1.[ ](https://baike.baidu.com/item/子网掩码/100207#ref_[1]_878)陈淑鑫主编. 信息技术基础[M]. 2011 第172页

2.[ ](https://baike.baidu.com/item/子网掩码/100207#ref_[2]_878)[子网掩码在IP协议中的作用机制剖析 ](https://baike.baidu.com/reference/100207/66b3VDC173f1MLjgFOmSZi9ruUYnLa5C1efqJ1XUi9rJTdj6ROb02w8IRXxBtFIsglH_q37qwdPogw81wsRT6uDpeSu3He6OQJNlyQoVeFwWU_D25X1DCBUD8R3StaLjMsc6Jbs23qf_) ．万方．2018[引用日期2019-08-02]

3.[ ](https://baike.baidu.com/item/子网掩码/100207#ref_[3]_878)[子网掩码划分子网问题 ](https://baike.baidu.com/reference/100207/1391xwSAcrhBVoFENBoszdbFqoCJlrbC3ChheFMM_cEKtNHpXvP42wsl2FK_GZViKP5toK_cjTjZSjbf3HrfLF0q_NVlo84QoZbsfm8nsnkk0Zt9L420Tpv2-Ap9OG55VDMp2HBHQ9I) ．万方．2016[引用日期2019-08-02]

4.[ ](https://baike.baidu.com/item/子网掩码/100207#ref_[4]_878)蔡燕主编. 计算机实用技术 第2版[M]. 2014 第183页

5.[ ](https://baike.baidu.com/item/子网掩码/100207#ref_[5]_878)[基于子网掩码的研究 ](https://baike.baidu.com/reference/100207/870ddfv2zi4MvsIeztq0UEE38NjA15OIppXyVSViPE7A-6vP-7w0MlWiy9j9CsigCehWVIxGg3Yv5O9ZKaxnUVypTORvGWiZKrTVrLwxl6e-XO8pLNCfeyBg6Oene9gnAkLdVMmcvYmexpWTCS2CBOb2Kg) ．万方．2009[引用日期2019-08-02]

6.[ ](https://baike.baidu.com/item/子网掩码/100207#ref_[6]_878)[子网掩码应用探究 ](https://baike.baidu.com/reference/100207/25075h8GuR-7Wm6wnBXVBf-UfMt6ExvgB7jBXhjtTKfPg8ccuZUw5NKUKKmDB_egZnXdfmioOTFh2SRnAseLW1E1ZfUMyn4sxFV6iPfcYsf6tWDSCYWUtdWoFnNuYw_Q5Aec9KKiB5Sx) ．万方．2016[引用日期2019-08-02]

7.[ ](https://baike.baidu.com/item/子网掩码/100207#ref_[7]_878)[变长子网掩码(VLSM)在油田局域网中的应用 ](https://baike.baidu.com/reference/100207/e61d2u166Mves3-OUnDS0cnbY-le6Lp0Rxj-6kIivYs_CW9XGGg6H5mP5fkdlt8EGumR99n7PE9Wm110toLyOuXqxiPNY_PwpDUeW8aH_Pilp-cds2T3PMyu5ubfYbxxarQTwDHKhFAcO6JT) ．万方．2013[引用日期2019-08-02]

8.[ ](https://baike.baidu.com/item/子网掩码/100207#ref_[8]_878)[变长子网掩码知识及在网络故障排除中的应用 ](https://baike.baidu.com/reference/100207/ffb6-78GD007oyZ_RnXP33xff-sy9PIop4xSmPAhCnL-AL9u09nA317Bx8YAo1SlT-BUbEzZvny51xNEi7gp8v0H_1L8IZ47t7C13-88_68PMjJbtNQi6soTfMkZOEz5RgC0XCm8CcJj) ．万方．2011[引用日期2019-08-02]